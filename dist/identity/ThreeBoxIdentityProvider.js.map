{"version":3,"sources":["../../src/identity/ThreeBoxIdentityProvider.js"],"names":["BOX_SERVER_URL","extractImgHash","image","hash","contentUrl","noop","ThreeBoxIdentityProvider","AddressIdentityProvider","resolve","address","data","axios","get","toLowerCase","name","createdAt","source","err"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAEA;;AAEA,MAAMA,cAAc,GAAG,sBAAvB;;AAEA,MAAMC,cAAc,GAAGC,KAAK,IAAI;AAC9B,QAAMC,IAAI,GACRD,KAAK,IAAIA,KAAK,CAAC,CAAD,CAAd,IAAqBA,KAAK,CAAC,CAAD,CAAL,CAASE,UAA9B,IAA4CF,KAAK,CAAC,CAAD,CAAL,CAASE,UAAT,CAAoB,GAApB,CAD9C;AAEA,SAAOD,IAAI,IAAI,IAAf;AACD,CAJD;;AAMA,MAAME,IAAI,GAAG,MAAM,CAAE,CAArB;;AAEe,MAAMC,wBAAN,SAAuCC,gCAAvC,CAA+D;AAAA;AAAA;AAAA,gDACrEF,IADqE;AAAA;;AAE5E;;;;;;;AAOA,QAAMG,OAAN,CAAcC,OAAd,EAAuB;AACrB,QAAI,CAACA,OAAD,IAAY,CAAC,0BAAUA,OAAV,CAAjB,EAAqC,OAAO,IAAP;;AAErC,QAAI;AACF,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAMC,eAAMC,GAAN,WAClBZ,cADkB,8BACgBS,OAAO,CAACI,WAAR,EADhB,EAAvB;AAGA,UAAG,CAACH,IAAI,CAACI,IAAT,EAAe,OAAO,IAAP;AACf,aAAO;AACLC,QAAAA,SAAS,EAAE,IADN;AAELD,QAAAA,IAAI,EAAEJ,IAAI,CAACI,IAFN;AAGLE,QAAAA,MAAM,EAAE,MAHH;AAILd,QAAAA,KAAK,EAAED,cAAc,CAACS,IAAI,CAACR,KAAN;AAJhB,OAAP;AAMD,KAXD,CAWE,OAAOe,GAAP,EAAY;AACZ;AACA,aAAO,IAAP;AACD;AACF;;AA3B2E","sourcesContent":["import axios from 'axios';\nimport { isAddress } from 'web3-utils';\n\nimport AddressIdentityProvider from './AddressIdentityProvider';\n\nconst BOX_SERVER_URL = 'https://ipfs.3box.io';\n\nconst extractImgHash = image => {\n  const hash =\n    image && image[0] && image[0].contentUrl && image[0].contentUrl['/'];\n  return hash || null;\n};\n\nconst noop = () => {}\n\nexport default class ThreeBoxIdentityProvider extends AddressIdentityProvider {\n  init = noop\n  /**\n   * Resolve the identity metadata for an address\n   * Should resolve to null if an identity could not be found\n   *\n   * @param  {string} address Address to resolve\n   * @return {Promise} Resolved metadata or rejected error\n   */\n  async resolve(address) {\n    if (!address || !isAddress(address)) return null\n\n    try {\n      const { data } = await axios.get(\n        `${BOX_SERVER_URL}/profile?address=${address.toLowerCase()}`\n      );\n      if(!data.name) return null\n      return {\n        createdAt: null,\n        name: data.name,\n        source: '3box',\n        image: extractImgHash(data.image),\n      };\n    } catch (err) {\n      // assume errors from 3box means the identity does not exist so we dont slow down any apps\n      return null;\n    }\n  }\n}\n"],"file":"ThreeBoxIdentityProvider.js"}